<html xmlns:th="http://www.thymeleaf.org" th:with="lang=${#locale.language}" th:lang="${lang}">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <link href="../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../css/styles.css" th:href="@{/css/homePageStyles.css}" rel="stylesheet"/>
    <link href="../css/headerStyles.css" th:href="@{/css/headerStyles.css}" rel="stylesheet"/>
    <link href="../css/all.min.css" th:href="@{/css/all.min.css}" rel="stylesheet"/>
    <link href="../css/profilePage.css" th:href="@{/css/profilePage.css}" rel="stylesheet"/>
    <script src="../js/jquery-3.5.1.min.js" th:src="@{/js/jquery-3.5.1.min.js}"></script>
    <script src="../js/bootstrap.js" th:src="@{/js/bootstrap.js}"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<div th:replace="fragments/header_footer_fragment.html :: header"></div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-11 mx-auto border shadow-lg border pb-3 mt-4 mb-sm-3">
                <form action="#" th:action="@{/member/accountProfile}" th:object="${userProfileForm}" method="post">
                    <div class="row mx-2 mt-2">
                        <div class="col-md-5 mx-auto text-center userImg">
                            <i th:if="*{imagePath == null || imagePath == ''}" class="fas fa-user-circle fa-10x"></i>

                            <div class="form-row">
                                <div class="col form-group mx-auto">
                                    <label class="col-form-label" th:for="*{imagePath}">Upload a file for profile pic</label>
                                    <input type="file" th:field="*{imagePath}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-7 mx-auto">
                            <div id="formHeading" class="h1 form-heading text-center mt-2">User Profile</div>
                            <div class="form-row" style="font-size: small">
                                <p class="text-danger">* Required Fields</p>
                            </div>
                            <div class="info-addressHeadings h5 text-left border-bottom my-2 pb-2">
                                Personal Information
                            </div>
                            <div class="form-row">
                                <div class="col-4 form-group">
                                    <label class="col-form-label" th:for="*{firstName}">First Name<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:value="*{firstName}" th:field="*{firstName}" autofocus>
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></span>
                                </div>
                                <div class="col-4 form-group">
                                    <label class="col-form-label" th:for="*{lastName}">Last Name<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:value="*{lastName}" th:field="*{lastName}">
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></span>
                                </div>
                                <div class="col form-group">
                                    <label class="col-form-label" th:for="*{phoneNum}">Phone Number</label>
                                    <input type="text" class="form-control" th:value="*{phoneNum}" th:field="*{phoneNum}" placeholder="">
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('phoneNum')}" th:errors="*{phoneNum}"></span>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col form-group">
                                    <label class="col-form-label" th:for="*{email}">Email<span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" th:value="*{email}" th:field="*{email}">
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
                                </div>
                                <div class="col form-group">
                                    <label class="col-form-label" th:for="*{userName}">Username<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:value="*{userName}" th:field="*{userName}" value="username">
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"></span>
                                </div>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox"
                                           name="addressProvided" th:checked="*{addressProvided}" th:value="*{addressProvided}"
                                           onclick="this.value = this.checked"
                                    ><small>Add address</small>
                                </label>
                            </div>
                            <div id="addressInput">
                                <div class="info-addressHeadings h5 text-left border-bottom my-2 pb-2">
                                    Address
                                </div>
                                <div class="text-danger form-error">
                                    <p th:if="${#fields.hasErrors('${userProfileForm}')}"th:errors="${userProfileForm}"></p>
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label" th:for="*{addressLine1}">Address line 1<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:value="*{addressLine1}" th:field="*{addressLine1}">
                                    <span class="text-danger form-error" th:if="${#fields.hasErrors('addressLine1')}" th:errors="*{addressLine1}"></span>
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label" th:for="*{addressLine2}">Address line 2</label>
                                    <input type="text" class="form-control" th:value="*{addressLine2}" th:field="*{addressLine2}">
                                </div>
                                <div class="form-row">
                                    <div class="col-5 form-group">
                                        <label class="col-form-label" th:for="*{cityName}">City<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" th:value="*{cityName}" th:field="*{cityName}">
                                        <span class="text-danger form-error" th:if="${#fields.hasErrors('cityName')}" th:errors="*{cityName}"></span>
                                    </div>
                                    <div class="col-4 form-group">
                                        <label class="col-form-label" th:for="*{stateName}">State<span class="text-danger">*</span></label>
                                        <select class="form-control" th:field="*{stateName}">
                                            <option value="">-Select an option-</option>
                                            <option th:each="state: ${stateList}" th:value="${state.name}" th:text="${state.name}"></option>
                                        </select>
                                        <span class="text-danger form-error" th:if="${#fields.hasErrors('stateName')}" th:errors="*{stateName}"></span>
                                    </div>
                                    <div class="col-3 form-group">
                                        <label class="col-form-label" th:for="*{zipcode}">Zip Code<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" th:value="*{zipcode}" th:field="*{zipcode}">
                                        <span class="text-danger form-error" th:if="${#fields.hasErrors('zipcode')}" th:errors="*{zipcode}"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-4 mx-auto text-center">
                                    <button class="btn btn-lg text-white mb-3" type="submit" id="submitBtn">Save Profile</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
<script>
    $(document).ready(function(){
       if($('input[name="addressProvided"]').prop("checked") == false){
           $("#addressInput").hide();
       }
       $('input[name="addressProvided"]').change(function(){
           $("#addressInput").toggle();
       });

    });
</script>
</html>